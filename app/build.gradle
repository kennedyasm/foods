plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
    id 'kotlin-kapt'
    id 'kotlin-android-extensions'
    id 'androidx.navigation.safeargs.kotlin'
    id 'com.google.android.libraries.mapsplatform.secrets-gradle-plugin'
    id 'com.google.dagger.hilt.android'
}

android {
    Properties properties = new Properties()

    def keystorePropertiesFile = rootProject.file("keystore.properties")
    if (keystorePropertiesFile.exists()) {
        properties.load(keystorePropertiesFile.newDataInputStream())
    }

    namespace 'com.example.foods'
    compileSdk properties.getProperty("compile.sdk").toInteger()

    defaultConfig {
        applicationId "com.example.foods"

        minSdk properties.getProperty("min.sdk").toInteger()
        targetSdk properties.getProperty("target.sdk").toInteger()

        versionCode properties.getProperty("version.code").toInteger()
        versionName properties.getProperty("version.name")

        testInstrumentationRunner "com.example.foods.FoodRecipesTestRunner"
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
            buildConfigField "String", "BASE_URL", properties.getProperty("base.url") ?: ""
            buildConfigField "String", "API_KEY", properties.getProperty("api.key") ?: ""
            buildConfigField "String", "SERVICES_PATH", properties.getProperty("services.path") ?: ""
        }
        debug {
            buildConfigField "String", "BASE_URL", properties.getProperty("base.url.debug") ?: ""
            buildConfigField "String", "API_KEY", properties.getProperty("api.key.debug") ?: ""
            buildConfigField "String", "SERVICES_PATH", properties.getProperty("services.path.debug") ?: ""
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = '1.8'
    }

    viewBinding {
        enabled = true
    }
}

dependencies {
    implementation baseDependencies.androidxCore
    implementation baseDependencies.androidxAppCompat
    implementation baseDependencies.materialDesign
    implementation baseDependencies.androidxConstraints

    implementation generalDependencies.retrofit
    implementation generalDependencies.retrofitGsonConverter
    implementation generalDependencies.okHttpLoginInterceptor
    implementation generalDependencies.retrofitAdapterRxJava
    implementation generalDependencies.reactivexRxAndroid
    implementation generalDependencies.androidxRoomRxJava3
    implementation generalDependencies.androidxRoomKtx
    implementation generalDependencies.glide
    implementation generalDependencies.playServicesMap
    implementation generalDependencies.kotlinxCoroutines
    implementation generalDependencies.androidxNavigationFragmentKtx
    implementation generalDependencies.androidxNavigationUiKtx
    implementation generalDependencies.androidxRoomRuntime
    implementation testDependencies.mockWebServer

    kapt generalDependencies.androidxRoomCompile

    annotationProcessor generalDependencies.glideCompiler

    debugImplementation generalDependencies.androidxFragmentTesting
    debugImplementation testDependencies.androidxTestMonitor

    testImplementation testDependencies.androidxArchCoreTest
    testImplementation testDependencies.mockitoCore
    testImplementation testDependencies.androidxTestCore
    testImplementation testDependencies.androidxTestMonitor
    testImplementation testDependencies.kotlinxCoroutinesTest

    androidTestImplementation androidTestDependencies.androidxJUnitTest
    androidTestImplementation androidTestDependencies.androidxEspressoTest
    androidTestImplementation androidTestDependencies.androidxArchCoreTest
    androidTestImplementation testDependencies.mockitoCore
    androidTestImplementation androidTestDependencies.androidxTextRunner
    androidTestImplementation androidTestDependencies.androidxTestRules
    androidTestImplementation androidTestDependencies.androidxTestEspresso
    androidTestImplementation androidTestDependencies.androidxTestUiautomator
    androidTestImplementation androidTestDependencies.androidxEspressoConcurrent
    androidTestImplementation androidTestDependencies.androidxTestEspressoContrib
    androidTestImplementation testDependencies.kotlinxCoroutinesTest

    implementation "com.google.dagger:hilt-android:2.44"
    kapt "com.google.dagger:hilt-compiler:2.44"

    implementation project(':presentation')
    implementation project(':data')

}
